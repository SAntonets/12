{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixaby-api.js","../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport function displayImages(images) {\n    const galleryContainer = document.querySelector('.gallery');\n    galleryContainer.innerHTML += images.map(image => `\n        <li class=\"gallery-item\">\n            <a href=\"${image.largeImageURL}\" data-lightbox=\"gallery\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"image-card-image\">\n                <div class=\"image-card-details\">\n                    <span class=\"image-card-likes\"><span class=\"bold\">Likes:</span><br>${image.likes}</span>\n                    <span class=\"image-card-views\"><span class=\"bold\">Views:</span><br>${image.views}</span>\n                    <span class=\"image-card-comments\"><span class=\"bold\">Comments:</span><br>${image.comments}</span>\n                    <span class=\"image-card-downloads\"><span class=\"bold\">Downloads:</span><br>${image.downloads}</span>\n                </div>\n            </a>\n        </li>\n    `).join('');\n\n    initLightbox();\n\n    const loadMoreButton = document.getElementById('load-more-button');\n    loadMoreButton.style.display = 'block'; // Показуємо кнопку \"Load more\" після завантаження галереї\n}\n\nfunction initLightbox() {\n    const options = {\n        captions: true,\n        captionType: 'attr',\n        captionsData: 'alt',\n        captionDelay: 250,\n        overlay: true,\n        overlayOpacity: 0.8,\n    };\n\n    const lightbox = new SimpleLightbox('.gallery a', options);\n}\n\nexport function showErrorToast() {\n    iziToast.error({\n        title: 'Error',\n        message: 'An error occurred while fetching images. Please try again later.',\n        position: 'topCenter',\n    });\n}\n\nexport function smoothScroll() {\n    const galleryItemHeight = document.querySelector('.gallery-item').getBoundingClientRect().height;\n    window.scrollBy({\n        top: galleryItemHeight * 2, // Прокрутити на висоту двох карточок\n        behavior: 'smooth' // Плавна анімація\n    });\n}\n","import iziToast from \"izitoast\";\nimport { displayImages, showErrorToast, smoothScroll } from \"./render-functions.js\";\n\nconst loader = document.getElementById('loader');\nconst gallery = document.querySelector('.gallery');\nlet page = 1;\nlet loadMoreButton; // Змінна для збереження посилання на кнопку \"Load more\"\n\nexport async function handleFormSubmit(event, searchForm) {\n    event.preventDefault();\n    const searchInput = searchForm.querySelector('#search-form-input');\n    const searchValue = searchInput.value.trim();\n    if (searchValue === '') {\n        iziToast.warning({\n            title: 'Caution',\n            message: 'The search field cannot be empty!',\n        });\n        return;\n    }\n\n    loader.style.display = 'block';\n    gallery.innerHTML = ''; // Очистка галереї перед новим пошуком\n    page = 1; // Скидання сторінки до першої при новому пошуку\n    loadMoreButton = document.getElementById('load-more-button'); // Оновлення змінної при кожному натисканні кнопки\n    await performSearch(searchValue);\n}\n\nexport async function loadMoreImages() {\n    loader.style.display = 'block';\n    page++; // Збільшення номеру сторінки для нового запиту\n    loadMoreButton = document.getElementById('load-more-button'); // Оновлення змінної при кожному натисканні кнопки\n    const searchInput = document.getElementById('search-form-input');\n    const searchValue = searchInput.value.trim();\n    await performSearch(searchValue);\n}\n\nasync function performSearch(searchValue) {\n    const apiKey = '42176348-9192a588252a9fae2debe28a6';\n    let apiUrl = `https://pixabay.com/api/?key=${apiKey}&q=${searchValue}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=15`;\n\n    try {\n        const response = await fetch(apiUrl);\n        const data = await response.json();\n        if (data.hits.length > 0) {\n            displayImages(data.hits);\n            if (data.hits.length < 15) {\n                loadMoreButton.style.display = 'none'; // Приховуємо кнопку \"Load more\", якщо на сервері закінчилися картинки\n            } else {\n                loadMoreButton.style.display = 'block';\n            }\n            smoothScroll();\n        } else {\n            iziToast.info({\n                title: 'Info',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topCenter',\n            });\n            loadMoreButton.style.display = 'none'; // Приховуємо кнопку \"Load more\", якщо на сервері немає зображень\n        }\n    } catch (error) {\n        showErrorToast();\n        console.error('Fetch error:', error);\n    } finally {\n        loader.style.display = 'none';\n    }\n}\n","import { handleFormSubmit, loadMoreImages } from \"./js/pixaby-api.js\";\n\nconst searchForm = document.getElementById('search-form');\nconst loadMoreButton = document.getElementById('load-more-button');\n\nsearchForm.addEventListener('submit', (event) => handleFormSubmit(event, searchForm));\nloadMoreButton.addEventListener('click', loadMoreImages);\n"],"names":["displayImages","images","galleryContainer","image","initLightbox","loadMoreButton","options","SimpleLightbox","showErrorToast","iziToast","smoothScroll","galleryItemHeight","loader","gallery","page","handleFormSubmit","event","searchForm","searchValue","performSearch","loadMoreImages","apiUrl","data","error"],"mappings":"wvBAIO,SAASA,EAAcC,EAAQ,CAClC,MAAMC,EAAmB,SAAS,cAAc,UAAU,EAC1DA,EAAiB,WAAaD,EAAO,IAAIE,GAAS;AAAA;AAAA,uBAE/BA,EAAM,aAAa;AAAA,4BACdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,yFAEuBA,EAAM,KAAK;AAAA,yFACXA,EAAM,KAAK;AAAA,+FACLA,EAAM,QAAQ;AAAA,iGACZA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,KAI3G,EAAE,KAAK,EAAE,EAEVC,IAEA,MAAMC,EAAiB,SAAS,eAAe,kBAAkB,EACjEA,EAAe,MAAM,QAAU,OACnC,CAEA,SAASD,GAAe,CACpB,MAAME,EAAU,CACZ,SAAU,GACV,YAAa,OACb,aAAc,MACd,aAAc,IACd,QAAS,GACT,eAAgB,EACxB,EAEqB,IAAIC,EAAe,aAAcD,CAAO,CAC7D,CAEO,SAASE,GAAiB,CAC7BC,EAAS,MAAM,CACX,MAAO,QACP,QAAS,mEACT,SAAU,WAClB,CAAK,CACL,CAEO,SAASC,GAAe,CAC3B,MAAMC,EAAoB,SAAS,cAAc,eAAe,EAAE,sBAAuB,EAAC,OAC1F,OAAO,SAAS,CACZ,IAAKA,EAAoB,EACzB,SAAU,QAClB,CAAK,CACL,CClDA,MAAMC,EAAS,SAAS,eAAe,QAAQ,EACzCC,EAAU,SAAS,cAAc,UAAU,EACjD,IAAIC,EAAO,EACPT,EAEG,eAAeU,EAAiBC,EAAOC,EAAY,CACtDD,EAAM,eAAc,EAEpB,MAAME,EADcD,EAAW,cAAc,oBAAoB,EACjC,MAAM,KAAI,EAC1C,GAAIC,IAAgB,GAAI,CACpBT,EAAS,QAAQ,CACb,MAAO,UACP,QAAS,mCACrB,CAAS,EACD,MACH,CAEDG,EAAO,MAAM,QAAU,QACvBC,EAAQ,UAAY,GACpBC,EAAO,EACPT,EAAiB,SAAS,eAAe,kBAAkB,EAC3D,MAAMc,EAAcD,CAAW,CACnC,CAEO,eAAeE,GAAiB,CACnCR,EAAO,MAAM,QAAU,QACvBE,IACAT,EAAiB,SAAS,eAAe,kBAAkB,EAE3D,MAAMa,EADc,SAAS,eAAe,mBAAmB,EAC/B,MAAM,KAAI,EAC1C,MAAMC,EAAcD,CAAW,CACnC,CAEA,eAAeC,EAAcD,EAAa,CAEtC,IAAIG,EAAS,qEAA4CH,CAAW,iEAAiEJ,CAAI,eAEzI,GAAI,CAEA,MAAMQ,EAAO,MADI,MAAM,MAAMD,CAAM,GACP,OACxBC,EAAK,KAAK,OAAS,GACnBtB,EAAcsB,EAAK,IAAI,EACnBA,EAAK,KAAK,OAAS,GACnBjB,EAAe,MAAM,QAAU,OAE/BA,EAAe,MAAM,QAAU,QAEnCK,MAEAD,EAAS,KAAK,CACV,MAAO,OACP,QAAS,2EACT,SAAU,WAC1B,CAAa,EACDJ,EAAe,MAAM,QAAU,OAEtC,OAAQkB,EAAO,CACZf,IACA,QAAQ,MAAM,eAAgBe,CAAK,CAC3C,QAAc,CACNX,EAAO,MAAM,QAAU,MAC1B,CACL,CC/DA,MAAMK,EAAa,SAAS,eAAe,aAAa,EAClDZ,EAAiB,SAAS,eAAe,kBAAkB,EAEjEY,EAAW,iBAAiB,SAAWD,GAAUD,EAAiBC,EAAOC,CAAU,CAAC,EACpFZ,EAAe,iBAAiB,QAASe,CAAc"}